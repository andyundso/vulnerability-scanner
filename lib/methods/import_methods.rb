require 'zip'

class ImportMethods

  def self.directory_to_save
    Rails.root.join('files', 'xml_imports', Time.now.strftime('%Y%m%d%H%M'))
  end

  def self.file_name(url, extension)
    full_filename = url.split('/')[-1]
    return full_filename.slice! ('.xml.zip') + extension
  end

  def self.extract_zip(zipfile, destination)
    Zip::File.open(zipfile) do |zip_file|
      zip_file.each do |f|
        fpath = File.join(destination, f.name)
        zip_file.extract(f, fpath) unless File.exist?(fpath)
        return fpath
      end
    end
  end

end